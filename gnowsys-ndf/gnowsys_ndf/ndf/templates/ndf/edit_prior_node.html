  <table cellpadding="3">
  
  <tr>
    <td>

    {% if node.prior_node|length_is:"0" %}
      <h4><strong>Prior Node:</strong></h4>
    {% else %}
      <h4><strong>Prior Node{{ node.prior_node|length|pluralize }}:</strong></h4>
    {% endif %}
    <!-- ########################################################################################### Section (A) : Display prior nodes -->
    <div id="prior-node-display-div" style="">
      {% include "ndf/display_prior_node.html" %}
    </div>

    <br />
  
    {% if user.is_authenticated %}
    <!-- ################################################################ Section (B) : Display drawer-widget to select/unselect nodes -->
      <div id="pn_drawertable" style="display:none">

      <table style="width:370px;" >
	      <tr>
          <td style='width:160px;'>
	          <b>Pages:</b><br/>
	          <select id='pn_drawer1' multiple="multiple">    <!---->
	          {% for key,value in pn_drawer1.items %}
	            <option id={{key}}>{{value}}</option>
	          {% endfor %}
	          </select>
	        </td>
	  
	        <td style='width:50px;text-align:center;vertical-align:middle;'>
	          <input id='pn_btnUp' type='button' value ='  ^  '><br/>
	          <input id='pn_btnRight' type='button' value ='  >  '><br/>
	          <input id='pn_btnLeft' type='button' value ='  <  '><br/>
		        <input id='pn_btnDown' type='button' value ='  v  '><br/>
	        </td>
	  
	        <td style='width:160px;'>
	          <b>Added to Drawer: </b><br/>
	          <select id='pn_drawer2' multiple="multiple">
	          {% for key,value in pn_drawer2.items %}
	            <option id={{key}}>{{value}}</option>
	          {% endfor %}
	          </select>
	        </td><br>
	      </tr>
      </table>

      </div>
    
      <input id="prior-node-list" type="hidden" name="prior-node-list" value="" />
    
    {% endif %}

    </td>
  </tr>
      
  </table>

<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<script type="text/javascript">

  $(function()
  {

    $("#pn_btnRight").click(function() { 
      var selectedOpts = $("#pn_drawer1 option:selected");

      if (selectedOpts.length == 0){
        alert("Nothing to move.");
        e.preventDefault();
      }

      $("#pn_drawer2").append($(selectedOpts).clone());
      $(selectedOpts).remove();
      e.preventDefault();
    });   
   
    $("#pn_btnUp").click(function() {
       
      $("#pn_drawer1 :selected").each(function (i, selected) {
        $(this).insertBefore($(this).prev());
	      $("#pn_drawer2").options.att("selected",false);
      });
      
      $("#pn_drawer1 select").focus().blur();
      
      $("#pn_drawer2 :selected").each(function (i, selected) {
        $(this).insertBefore($(this).prev());
	      $("#pn_drawer1").options.att("selected",false);
      });
      
      $("#pn_drawer2 select").focus().blur();
    });

    $("#pn_btnDown").click(function() {
      $("#pn_drawer1 :selected").each(function (i, selected) {
        $(this).insertAfter($(this).next());
	      $("#pn_drawer2").options.att("selected",false);	
      });
      
      $("#pn_drawer1 select").focus().blur();
      
      $("#pn_drawer2 :selected").each(function (i, selected) {
        $(this).insertAfter($(this).next());
	      $("#pn_drawer1").options.att("selected",false);
      });
      
      $("#pn_drawer2 select").focus().blur();
    });
    
    $("#pn_btnLeft").click(function() {
      var selectedOpts = $("#pn_drawer2 option:selected");
      if (selectedOpts.length == 0) {
        alert("Nothing to move.");
        e.preventDefault();
      }

      $("#pn_drawer1").append($(selectedOpts).clone());
      $(selectedOpts).remove();
      e.preventDefault();
    });  
    
  });

</script>

