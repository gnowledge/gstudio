{% load i18n %}
{% load get_dict_from_list_of_dicts from simple_filters %}
{% load get_relation_value  from ndf_tags %}

{% if first_arg and second_arg and third_arg %}
    <a href="{% url url_name first_arg second_arg third_arg %}{{search_url_text|safe}}"/>
{% elif first_arg and second_arg %}
    <a href="{% url url_name first_arg second_arg %}{{search_url_text|safe}}"/>
{% elif first_arg %}
    <a href='{% url url_name first_arg %}{{search_url_text|safe}}'/>
{% endif %}

<div class="module_card">
    <div class="card_banner">
        {% get_relation_value node.pk 'has_banner_pic' as grel_dict %}
        <div class="medium-12 rows">
        {% if not grel_dict.cursor and grel_dict.grel_node and grel_dict.grel_node.if_file.thumbnail.relurl %}
            <img class="card_photo_widget" src="{{MEDIA_URL}}{{grel_dict.grel_node.if_file.mid.relurl}}" alt="" />
        {% else %}
            <img class="card_photo_widget" src="/static/ndf/images/module-card.png"/></img>
            
        {% endif %}
            <div class="medium-12 columns card_title_font" title="{% firstof node.altnames node.name %} ">
                {% firstof node.altnames node.name %}
            </div>
        </div>
    {% get_dict_from_list_of_dicts node.attribute_set as node_attrs %}
    </div>
    <div class="card_summary">
        <div class="card_section" style="height:6rem;">
            <p class="module_brief">
                {{node.content|safe|striptags|truncatechars:100}}
            </p>
        </div>
        <div class="card_section">
            <span class="card_label">
                {% trans "Subject" %}: {{node_attrs.educationalsubject}}
            </span class="card_label">
            <p class="ellipsis"></p>
                <span class="card_label">
                   {% trans "Grade" %} : {{node_attrs.educationallevel|join:', '}}
                </span class="card_label">
            <p class="ellipsis"></p>
                <!-- <span class="card_label">
                    Units
                </span class="card_label"> -->
            <p class="ellipsis"></p>
        </div>
        <div class="card_section">
                <i class="fa fa-book"></i>
                <span>{% trans "Explore" %}</span>
        </div>
    </div>
</div>
    </a>

