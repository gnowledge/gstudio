{% extends "ndf/base.html" %}
{% block title %} {{title}} {% endblock %}

{% block meta_content %}
<p>Upload your files from your computer to metaStudio. You can view the existing files in the group and create collections.</p>

{% endblock %}

{% block search_content %}
<form id ="file_search" enctype="multipart/form-data" method="GET" action="{% url 'image_search' group_name %}">

  <div class="row collapse">
    <div class="small-10 columns">
      <input type="text" placeholder="search files" name="search">
    </div>
    <div class="small-2 columns">
      <a href="#" class="button postfix" onclick="document.forms[0].submit();return false;">
        <i class="fi-magnifying-glass large"></i>
      </a>
    </div>
  </div>

</form>

{% endblock %}

{% block body_content %}

<header class="row">
  <h2 class="medium-12 columns">Gallery</h2>
  <div class="medium-12 columns">
   <dl class="tabs" data-tab>
    <dd class="active"><a href="#panel2-1"><i class="fi-eye"></i> All files</a></dd>
    <dd><a href="#panel2-3"><i class="fi-page-filled"></i> Documents</a></dd>
    <dd><a href="#panel2-3"><i class="fi-camera"></i>Images</a></dd>
    <dd><a href="#panel2-4"><i class="fi-video"></i> Videos</a></dd>
    <dd><a href="#panel2-4"><i class="fi-list-thumbnails"></i> File list</a></dd>
  </dl>

</div>
</header>

{% load ndf_tags %}
{% if already_uploaded %} 
<div id="message">
  <span style="color:red">Listed below files are already uploaded please choose different files</span>
  <ul>
    {% for each in already_uploaded %}
    <li>{{each}}</li>
    {% endfor %}
  </ul>
</div>
{% endif %}

{% load url from future %}


<!-- Card -->

<ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-4">

  <!-- Node create card-->
  <li class="create card">
    <div class="file">
      <h4><i class="fi-plus"></i> New Upload</h4>
      <div class="row">
        <div class="large-12 columns">

          <input type="text" placeholder="Name of the File" />
          <textarea placeholder="Describe the File"></textarea>

          <div class="login-mode switch round">

            <input id="PUBLIC" name="login-mode" type="radio" checked>
            <label for="PUBLIC" onclick="">Public <i class="fi-torsos-all"></i></label>

            <input id="PRIVATE" name="login-mode" type="radio">
            <label for="PRIVATE" onclick="">Private <i class="fi-lock"></i></label>

            <span></span>

          </div>

        </div>
      </div>
      {% if user.is_authenticated %}
      <a class="button expand" href="{% url 'uploadDoc' group_name %}?next={{request.path}}">
        Upload File
      </a>
      {% endif %}
    </li>

{% if files.count != 0 %}
    <!-- Existing card list-->
    {% for file in files %}
    {% get_user_object file.created_by as user_obj %}
    {% get_grid_fs_object file as grid_fs_obj %}
    <li class="card">
      <div class="file">

        <header>

          <div class="label-list"><span class="label">citizen-science</span><span class="label">education</span></div>
          <div class="th"><img src="/static/ndf/images/icon/meta.svg"></div>
          <h4>{{file.name}}</h4>
          <small>Created by <span class="user">{{ user_obj.username }}</span> <em>33 days ago</em></small>

        </header>

        <p>This file is a..</p>

        <a class="button expand" href ="{% url 'read_file' group_name file grid_fs_obj.filename %}">File details</a>
        {% get_user_object file.created_by as user_obj %}
        {% ifequal  user_obj.username  user.username  %}
        <a  class="button alert tiny" href="{% url 'delete_file' 'group' file %}?next={{request.path}}">Delete </a>
        {% endifequal %}

        <footer class="row">
         <div class="small-6 columns">{{file.mime_type}}</div>
         <div class="small-6 columns"><strong>{{file.file_size.size}}</strong> {{file.file_size.unit}}</div> 
       </footer>

     </div>
   </li>

   {% endfor %}

   {% else %}
   <p><em>Currently NO files uploaded!!!</em></p>
   {% endif %}
 </ul>

 {% endblock %}

