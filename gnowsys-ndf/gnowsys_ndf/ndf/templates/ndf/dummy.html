<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
	<style>
		.bar {
			
		}

		.bar:hover {
			fill: steelblue ;
		}
		.d3-tip {
			line-height: 1;
			font-size: 8px;
			font-family: sans-serif;
			padding: 12px;
			background: rgba(0, 0, 0, 0.8);
			color: #fff;
			border-radius: 2px;
		}

		.d3-tip:after {
			box-sizing: border-box;
			display: inline;
			font-size: 5px;
			width: 100%;
			line-height: .5;
			color: rgba(0, 0, 0, 0.8);
			content: "\25BC";
			position: absolute;
			text-align: center;
		}

		.d3-tip.n:after {
			margin: -1px 0 0 0;
			top: 100%;
			left: 0;
		}



	</style>

</head>
<body>
	<script>
		var dataset = [21,17,18,25,15,17,13,11,20,21,23,24,19,17,12,7];
		

		// console.log(dataset);

		var w = 270; 
		var h = 200;
		var barPadding = 1; 

		var colorScale = d3.scale.linear()
		.domain([0,25])
		.range(["#a9d7c3","#238558"]);

		var tip = d3.tip()
		.attr('class', 'd3-tip')
		.offset([-10, 0])
		.html(function(d) { console.log(d3.event.target);
			return "<strong>Frequency:</strong> <span style='color:red'>" + d + "</span>";
		})

		var svg = d3.select("#bar_visual").append("div").append("svg")
		.attr("width",w)
		.attr("height",h);

		var bars =svg.selectAll("rect")
		.data(dataset)
		.enter()
		.append("rect")
		.attr("class","bar")
		.attr("title","sample")
		.attr("x", function(d, i) {
			return i * (w / dataset.length);
		})
		.attr("y",function(d){ return h-(d*4);})
		.attr("height", function(d){ return (d * 4);})
		.attr("width", function(d){ return w/dataset.length - barPadding;})
		.attr("fill", function(d){ return colorScale(d);})//;//"rgb(0, 0, " + (d * 10) + ")";});
		.call(tip)
		.on('mouseover', tip.show)
		.on('mouseout', tip.hide);


		// bars.data(dataset)
		// 	.attr("y",function(d){ return h-(d*4);})//return h-(d*4);})
		// 	.transition()
		// 	.duration(500);


		svg.selectAll("text")
		.data(dataset)
		.enter()
		.append("text")
		.transition()
		.delay(1000)
		.text(function(d){ return d ;})
		.attr("x", function(d, i) {
			return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
		})
		.attr("y", function(d) {
		        return h - (d * 4)+ 14;  //15 is now 14
		    })

		.attr("font-family", "sans-serif")
		.attr("font-size", "11px")
		.attr("fill", "white")
		.attr("text-anchor", "middle");

		

		// svg.call(tip);
		// bars.on('mouseover', tip.show)
			// .on('mouseout', tip.hide);


		// var legends = d3.select("body").append("div").append("svg")
		// 								.attr("height",100)
		// 								.attr("width",500);

		// 	legends.append("text")
		// 			.text("hello people this a svg text test")
		// 			.attr("y",25);



</script>